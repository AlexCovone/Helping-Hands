<%- include('partials/header') -%>
  <div class="container mt-20 mx-auto">
    <h2 class="text-3xl font-bold mb-4">Hello <%= user.name.split(' ')[0] %>,</h2>
    <span class="text-xl">Find an event that fits your schedule</span>
    

    <div class="grid grid-cols-2 gap-4">
      <% for(var i=0; i < upcomingEvents.length; i++) {%>
        <a href="/events/<%= upcomingEvents[i]._id%>" class="block w-full">
          <div class="stats shadow border border-red-500 w-full hover:text-primary">
            <div class="stat">
              <div class="stat-title"><%= upcomingEvents[i].date %></div>
              <div class="stat-value truncate"><%= upcomingEvents[i].eventName %></div>
              <div class="stat-title mt-2"><%= upcomingEvents[i].staffArrival%> - <%= upcomingEvents[i].estimatedEndTime%></div>
            </div>
            

            <!-- WORK ON WIDTH FOR SECOND DIV TO MAKE UNIFORM ACROSS EACH EVENT BEING RENDERED -->
            <div class="stat">
              <div class="stat-title text-white font-bold">Requested Staff</div>
              <div class="stat-title">Waitstaff: 4</div>
              <div class="stat-title">Bartender: 2</div>
              <div class="flex">
                <div class="stat-title">Chef: 0</div>
                <% if(upcomingEvents[i].waitstaffNeeded === 0 && upcomingEvents[i].bartenderNeeded === 0 && upcomingEvents[i].chefNeeded === 0) { %>
                  <div class="badge badge-error gap-2 ml-auto">
                    Event Full
                  </div>
                <% } %>
              </div>
            </div>
          </div>
        </a>
      <% } %>
    </div>
    
    
    



      <!-- SNAP TO CENTER -->
      <div class="border-red-500 border-3 flex justify-between mt-10">
        <h1 class="xs:text-2xl sm:text-3xl font-bold">Upcoming Events</h1>
        <h4 class="font-bold"><a href="/upcoming-events" class="btn btn-secondary btn-sm">See All</a></h4>
      </div>

      <!-- DECIDE ON BASE-200 VS Base-300 / W or W/O shadow -->
      <div class="carousel carousel-center rounded-box shadow-2xl bg-base-200 -mx-4 my-5 sm:py-3">
        <% for(var i=0; i < upcomingEvents.length; i++) {%>
          <div class="card carousel-item xs:w-80 sm:w-96 glass m-5">
            <figure><img src="<%= upcomingEvents[i].image%>" alt="Event Photo"/></figure>
            <div class="card-body">
              <% if(upcomingEvents[i].waitstaffNeeded === 0 && upcomingEvents[i].bartenderNeeded === 0 && upcomingEvents[i].chefNeeded === 0) { %>
                <div class="badge badge-error gap-2">
                  Event Full
                </div>
              <% } %>
              <h2 class="card-title"><%= upcomingEvents[i].eventName %></h2>
              <h3><%= upcomingEvents[i].date %></h3>
              <div class="flex justify-between">
                <h3><%= upcomingEvents[i].staffArrival%> - <%= upcomingEvents[i].estimatedEndTime%> </h3>
                <div class="card-actions justify-end mt-2">
                  <a href="/events/<%= upcomingEvents[i]._id%>" class="btn xs:btn-sm sm:btn xs:btn-primary sm:btn-primary xs:ml-8">Learn More</a>
                </div>
              </div>

            </div>
          </div>


        <% } %>
      </div>

      <br>

      <!-- SNAP TO CENTER -->
      <div class="border-red-500 border-3 flex justify-between">
        <h1 class="xs:text-2xl sm:text-3xl font-bold">Previous Events</h1>
        <h4 class="font-bold"><a href="/previous-events" class="btn btn-secondary btn-sm">See All</a></h4>
      </div>

      <div class="carousel carousel-center rounded-box bg-base-300 shadow-2xl -mx-4 my-5 sm:py-3">
        <% for(var i=0; i < previousEvents.length; i++) {%>
          <div class="card carousel-item xs:w-80 sm:w-96 glass m-5">
            <figure><img src="<%= previousEvents[i].image%>" alt="Event Photo"/></figure>
            <div class="card-body">
              <% if(previousEvents[i].waitstaffNeeded === 0 && previousEvents[i].bartenderNeeded === 0 && previousEvents[i].chefNeeded === 0) { %>
                <div class="badge badge-error gap-2">
                  Event Full
                </div>
              <% } %>
              <h2 class="card-title"><%= previousEvents[i].eventName %></h2>
              <h3><%= previousEvents[i].date %></h3>
              <h3><%= previousEvents[i].staffArrival %> - <%= previousEvents[i].estimatedEndTime %> </h3>
              <div class="card-actions justify-end mt-2">
                <a href="/events/<%= previousEvents[i]._id%>" class="btn xs:btn-sm sm:btn xs:btn-primary sm:btn-primary xs:ml-8">Learn More</a>
              </div>
            </div>
          </div>
        <% } %>
      </div>

    </div>  
  </div>


<%- include('partials/footer') -%>